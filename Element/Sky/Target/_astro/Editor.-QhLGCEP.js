import{d as U,m as A,u as y,b,e as z,o as G,f as w,s as ie,j as re,k as J,n as P,p as ae,t as D,q as se,i as I,c as L,v as oe,w as le}from"./web.DNswYvNQ.js";import{e as H}from"./editor.main.CKfTQ7Z-.js";import"./preload-helper.CLcXU_4U.js";function f(e){const[t,n]=U(e);return{get:t,set:n}}function ue({initialValues:e={},validateOn:t="submit",revalidateOn:n="input",validate:r}={}){const s=f([]),o=f([]),a=f(),l=f(0),c=f(!1),i=f(!1),g=f(!1),u=f(!1),d=f(!1),v=f(!1),h=f({});return{internal:{initialValues:e,validate:r,validateOn:t,revalidateOn:n,fieldNames:s,fieldArrayNames:o,element:a,submitCount:l,submitting:c,submitted:i,validating:g,touched:u,dirty:d,invalid:v,response:h,fields:{},fieldArrays:{},validators:new Set},get element(){return a.get()},get submitCount(){return l.get()},get submitting(){return c.get()},get submitted(){return i.get()},get validating(){return g.get()},get touched(){return u.get()},get dirty(){return d.get()},get invalid(){return v.get()},get response(){return h.get()}}}function ce(e){const t=ue(e);return[t,{Form:n=>we(A({of:t},n)),Field:n=>Ce(A({of:t},n)),FieldArray:n=>Ne(A({of:t},n))}]}function K(e,t,n){const{checked:r,files:s,options:o,value:a,valueAsDate:l,valueAsNumber:c}=e;return y(()=>!n||n==="string"?a:n==="string[]"?o?[...o].filter(i=>i.selected&&!i.disabled).map(i=>i.value):r?[...t.value.get()||[],a]:(t.value.get()||[]).filter(i=>i!==a):n==="number"?c:n==="boolean"?r:n==="File"&&s?s[0]:n==="File[]"&&s?[...s]:n==="Date"&&l?l:t.value.get())}function V(e){return[...Object.values(e.internal.fields),...Object.values(e.internal.fieldArrays)]}function S(e,t){return e.internal.fieldArrays[t]}function de(e,t){return+t.replace(`${e}.`,"").split(".")[0]}function Q(e,t){X(e,!1).forEach(n=>{const r=y(S(e,n).items.get).length-1;t.filter(s=>s.startsWith(`${n}.`)&&de(n,s)>r).forEach(s=>{t.splice(t.indexOf(s),1)})})}function X(e,t=!0){const n=[...y(e.internal.fieldArrayNames.get)];return t&&Q(e,n),n}function fe(e,t=!0){const n=[...y(e.internal.fieldNames.get)];return t&&Q(e,n),n}function F(e,t){return e.internal.fields[t]}function $(e,t,n){return y(()=>{const r=fe(e,n),s=X(e,n);return typeof t=="string"||Array.isArray(t)?(typeof t=="string"?[t]:t).reduce((o,a)=>{const[l,c]=o;return s.includes(a)?(s.forEach(i=>{i.startsWith(a)&&c.add(i)}),r.forEach(i=>{i.startsWith(a)&&l.add(i)})):l.add(a),o},[new Set,new Set]).map(o=>[...o]):[r,s]})}function j(e,t){return(typeof e!="string"&&!Array.isArray(e)?e:t)||{}}function O(e,t){return e.split(".").reduce((n,r)=>n?.[r],t)}let ge=0;function T(){return ge++}function ye(e,t){const n=r=>r instanceof Blob?r.size:r;return Array.isArray(e)&&Array.isArray(t)?e.map(n).join()!==t.map(n).join():e instanceof Date&&t instanceof Date?e.getTime()!==t.getTime():Number.isNaN(e)&&Number.isNaN(t)?!1:e!==t}function ve(e,t){y(()=>e.internal.dirty.set(t||V(e).some(n=>n.active.get()&&n.dirty.get())))}function me(e,t){y(()=>{const n=ye(t.startValue.get(),t.value.get());n!==t.dirty.get()&&b(()=>{t.dirty.set(n),ve(e,n)})})}function he(e,t,n,{on:r,shouldFocus:s=!1}){y(()=>{const o=t.validateOn??e.internal.validateOn,a=t.revalidateOn??e.internal.revalidateOn;r.includes((o==="submit"?e.internal.submitted.get():t.error.get())?a:o)&&R(e,n,{shouldFocus:s})})}function M(e,t,n,r,s,o){b(()=>{t.value.set(a=>t.transform.reduce((l,c)=>c(l,r),o??a)),t.touched.set(!0),e.internal.touched.set(!0),me(e,t),he(e,t,n,{on:s})})}function pe(e,t){if(!S(e,t)){const n=O(t,e.internal.initialValues)?.map(()=>T())||[],r=f(n),s=f(n),o=f(n),a=f(""),l=f(!1),c=f(!1),i=f(!1);e.internal.fieldArrays[t]={initialItems:r,startItems:s,items:o,error:a,active:l,touched:c,dirty:i,validate:[],validateOn:void 0,revalidateOn:void 0,consumers:new Set},e.internal.fieldArrayNames.set(g=>[...g,t])}return S(e,t)}function be(e,t){if(!F(e,t)){const n=O(t,e.internal.initialValues),r=f([]),s=f(n),o=f(n),a=f(n),l=f(""),c=f(!1),i=f(!1),g=f(!1);e.internal.fields[t]={elements:r,initialValue:s,startValue:o,value:a,error:l,active:c,touched:i,dirty:g,validate:[],validateOn:void 0,revalidateOn:void 0,transform:[],consumers:new Set},e.internal.fieldNames.set(u=>[...u,t])}return F(e,t)}function Ae(e,t,{shouldActive:n=!0}){const r=Object.entries(t).reduce((s,[o,a])=>([F(e,o),S(e,o)].every(l=>!l||n&&!y(l.active.get))&&s.push(a),s),[]).join(" ");r&&e.internal.response.set({status:"error",message:r})}function Y(e,t){y(()=>{e.internal.invalid.set(t||V(e).some(n=>n.active.get()&&n.error.get()))})}function x(e){let t=!1,n=!1,r=!1;y(()=>{for(const s of V(e))if(s.active.get()&&(s.touched.get()&&(t=!0),s.dirty.get()&&(n=!0),s.error.get()&&(r=!0)),t&&n&&r)break}),b(()=>{e.internal.touched.set(t),e.internal.dirty.set(n),e.internal.invalid.set(r)})}function Z(e,t){y(()=>F(e,t)?.elements.get()[0]?.focus())}function ee(e,t,n,{shouldActive:r=!0,shouldTouched:s=!1,shouldDirty:o=!1,shouldFocus:a=!!n}={}){b(()=>{y(()=>{for(const l of[F(e,t),S(e,t)])l&&(!r||l.active.get())&&(!s||l.touched.get())&&(!o||l.dirty.get())&&(l.error.set(n),n&&"value"in l&&a&&Z(e,t))}),Y(e,!!n)})}function Se(e,t,n){ee(e,t,"",n)}function te(e,t,n){const[r,s]=$(e,t),{shouldActive:o=!0,shouldTouched:a=!1,shouldDirty:l=!1,shouldValid:c=!1}=j(t,n);return typeof t!="string"&&!Array.isArray(t)?e.internal.fieldNames.get():s.forEach(i=>S(e,i).items.get()),r.reduce((i,g)=>{const u=F(e,g);return(!o||u.active.get())&&(!a||u.touched.get())&&(!l||u.dirty.get())&&(!c||!u.error.get())&&(typeof t=="string"?g.replace(`${t}.`,""):g).split(".").reduce((d,v,h,p)=>d[v]=h===p.length-1?u.value.get():typeof d[v]=="object"&&d[v]||(isNaN(+p[h+1])?{}:[]),i),i},typeof t=="string"?[]:{})}function Fe(e,t,n){const[r,s]=$(e,t,!1),o=typeof t=="string"&&r.length===1,a=!o&&!Array.isArray(t),l=j(t,n),{initialValue:c,initialValues:i,keepResponse:g=!1,keepSubmitCount:u=!1,keepSubmitted:d=!1,keepValues:v=!1,keepDirtyValues:h=!1,keepItems:p=!1,keepDirtyItems:E=!1,keepErrors:C=!1,keepTouched:W=!1,keepDirty:q=!1}=l;b(()=>y(()=>{r.forEach(N=>{const m=F(e,N);(o?"initialValue"in l:i)&&m.initialValue.set(()=>o?c:O(N,i));const k=h&&m.dirty.get();!v&&!k&&(m.startValue.set(m.initialValue.get),m.value.set(m.initialValue.get),m.elements.get().forEach(B=>{B.type==="file"&&(B.value="")})),W||m.touched.set(!1),!q&&!v&&!k&&m.dirty.set(!1),C||m.error.set("")}),s.forEach(N=>{const m=S(e,N),k=E&&m.dirty.get();!p&&!k&&(i&&m.initialItems.set(O(N,i)?.map(()=>T())||[]),m.startItems.set([...m.initialItems.get()]),m.items.set([...m.initialItems.get()])),W||m.touched.set(!1),!q&&!p&&!k&&m.dirty.set(!1),C||m.error.set("")}),a&&(g||e.internal.response.set({}),u||e.internal.submitCount.set(0),d||e.internal.submitted.set(!1)),x(e)}))}function Ee(e,t,{duration:n}={}){e.internal.response.set(t),n&&setTimeout(()=>{y(e.internal.response.get)===t&&e.internal.response.set({})},n)}async function R(e,t,n){const[r,s]=$(e,t),{shouldActive:o=!0,shouldFocus:a=!0}=j(t,n),l=T();e.internal.validators.add(l),e.internal.validating.set(!0);const c=e.internal.validate?await e.internal.validate(y(()=>te(e,{shouldActive:o}))):{};let i=typeof t!="string"&&!Array.isArray(t)?!Object.keys(c).length:!0;const[g]=await Promise.all([Promise.all(r.map(async u=>{const d=F(e,u);if(!o||y(d.active.get)){let v;for(const p of d.validate)if(v=await p(y(d.value.get)),v)break;const h=v||c[u]||"";return h&&(i=!1),d.error.set(h),h?u:null}})),Promise.all(s.map(async u=>{const d=S(e,u);if(!o||y(d.active.get)){let v="";for(const p of d.validate)if(v=await p(y(d.items.get)),v)break;const h=v||c[u]||"";h&&(i=!1),d.error.set(h)}}))]);return b(()=>{if(Ae(e,c,{shouldActive:o}),a){const u=g.find(d=>d);u&&Z(e,u)}Y(e,!i),e.internal.validators.delete(l),e.internal.validators.size||e.internal.validating.set(!1)}),i}function ne({of:e,name:t,getStore:n,validate:r,validateOn:s,revalidateOn:o,transform:a,keepActive:l=!1,keepState:c=!0}){z(()=>{const i=n();i.validate=r?Array.isArray(r)?r:[r]:[],i.validateOn=s,i.revalidateOn=o,"transform"in i&&(i.transform=a?Array.isArray(a)?a:[a]:[]);const g=T();i.consumers.add(g),y(i.active.get)||b(()=>{i.active.set(!0),x(e)}),G(()=>setTimeout(()=>{i.consumers.delete(g),b(()=>{!l&&!i.consumers.size&&(i.active.set(!1),c?x(e):Fe(e,t))}),"elements"in i&&i.elements.set(u=>u.filter(d=>d.isConnected))}))})}function Ce(e){const t=w(()=>be(e.of,e.name));return ne(A({getStore:t},e)),w(()=>e.children({get name(){return e.name},get value(){return t().value.get()},get error(){return t().error.get()},get active(){return t().active.get()},get touched(){return t().touched.get()},get dirty(){return t().dirty.get()}},{get name(){return e.name},get autofocus(){return!!t().error.get()},ref(n){t().elements.set(r=>[...r,n]),z(()=>{if(n.type!=="radio"&&t().startValue.get()===void 0&&y(t().value.get)===void 0){const r=K(n,t(),e.type);t().startValue.set(()=>r),t().value.set(()=>r)}})},onInput(n){M(e.of,t(),e.name,n,["touched","input"],K(n.currentTarget,t(),e.type))},onChange(n){M(e.of,t(),e.name,n,["change"])},onBlur(n){M(e.of,t(),e.name,n,["touched","blur"])}}))}function Ne(e){const t=w(()=>pe(e.of,e.name));return ne(A({getStore:t},e)),w(()=>e.children({get name(){return e.name},get items(){return t().items.get()},get error(){return t().error.get()},get active(){return t().active.get()},get touched(){return t().touched.get()},get dirty(){return t().dirty.get()}}))}class _ extends Error{name="FormError";errors;constructor(t,n){super(typeof t=="string"?t:""),this.errors=typeof t=="string"?n||{}:t}}var ke=D("<form novalidate>");function we(e){const[,t,n]=ie(e,["of"],["keepResponse","shouldActive","shouldTouched","shouldDirty","shouldFocus"]);return(()=>{var r=re(ke),s=e.of.internal.element.set;return typeof s=="function"?J(s,r):e.of.internal.element.set=r,P(r,A(n,{onSubmit:async o=>{o.preventDefault();const{of:a,onSubmit:l,responseDuration:c}=e;b(()=>{t.keepResponse||a.internal.response.set({}),a.internal.submitCount.set(i=>i+1),a.internal.submitted.set(!0),a.internal.submitting.set(!0)});try{await R(a,t)&&await l?.(te(a,t),o)}catch(i){b(()=>{i instanceof _&&Object.entries(i.errors).forEach(([g,u])=>{u&&ee(a,g,u,{...t,shouldFocus:!1})}),(!(i instanceof _)||i.message)&&Ee(a,{status:"error",message:i?.message||"An unknown error has occurred."},{duration:c})})}finally{a.internal.submitting.set(!1)}}}),!1),ae(),r})()}function De(e){return t=>!t&&t!==0||Array.isArray(t)&&!t.length?e:""}var Oe=D("<div>"),Te=D("<div class=w-full><div class=Editor><code class=Monaco></code><input>"),Ie=D("<div class=Error><span>&nbsp;&nbsp;&nbsp;"),Le=D("<input type=hidden>"),$e=({Type:e}={Type:"HTML"})=>{const[t,{Form:n,Field:r}]=ce(),s=U(Me(e));let o,a;return se(()=>{console.log(o),o instanceof HTMLElement&&(a=H.create(o,{value:s[0](),language:e.toLowerCase(),automaticLayout:!0,lineNumbers:"off","semanticHighlighting.enabled":"configuredByTheme",autoClosingBrackets:"always",autoIndent:"full",tabSize:4,detectIndentation:!1,useTabStops:!0,minimap:{enabled:!1},scrollbar:{useShadows:!0,horizontal:"hidden",verticalScrollbarSize:10,verticalSliderSize:4,alwaysConsumeMouseWheel:!1},folding:!1,theme:window.matchMedia("(prefers-color-scheme: dark)").matches?"Dark":"Light",wrappingStrategy:"advanced",bracketPairColorization:{enabled:!0,independentColorPoolPerBracketType:!0},padding:{top:12,bottom:12},fixedOverflowWidgets:!0,tabCompletion:"on",acceptSuggestionOnEnter:"on",cursorWidth:5,roundedSelection:!0,matchBrackets:"always",autoSurround:"languageDefined",screenReaderAnnounceInlineSuggestion:!1,renderFinalNewline:"on",selectOnLineNumbers:!1,formatOnType:!0,formatOnPaste:!0,fontFamily:"'Source Code Pro'",fontWeight:"400",fontLigatures:!0,links:!1,fontSize:16}),a.getModel()?.setEOL(H.EndOfLineSequence.LF),a.onKeyDown(l=>{l.ctrlKey&&l.code==="KeyS"&&(l.preventDefault(),R(t),t.element?.submit())}),a.onDidChangeModelLanguageConfiguration(()=>a.getAction("editor.action.formatDocument")?.run()),a.onDidLayoutChange(()=>a.getAction("editor.action.formatDocument")?.run()),window.addEventListener("load",()=>a.getAction("editor.action.formatDocument")?.run()),setTimeout(()=>a.getAction("editor.action.formatDocument")?.run(),1e3),z(le(s[0],l=>a.getModel()?.setValue(l),{defer:!1})))}),G(()=>{console.log(o),console.log(2)}),(()=>{var l=Oe();return I(l,L(n,{method:"post",onSubmit:Pe,get children(){return[L(r,{name:"Content",get validate(){return[De(`Please enter some ${e}.`)]},children:(c,i)=>(()=>{var g=Te(),u=g.firstChild,d=u.firstChild,v=d.nextSibling,h=o;return typeof h=="function"?J(h,d):o=d,I(u,(()=>{var p=w(()=>!!c.error);return()=>p()&&(()=>{var E=Ie(),C=E.firstChild;return C.firstChild,E.$$click=()=>{Se(t,"Content"),a.focus()},I(C,()=>c.error,null),E})()})(),v),P(v,A(i,{type:"hidden",required:!0}),!1),g})()}),L(r,{name:"Field",children:(c,i)=>(()=>{var g=Le();return P(g,A(i,{value:e}),!1),g})()})]}})),l})()};const Me=e=>{switch(e){case"CSS":return`
/* Example CSS Code */
body {

}			
`;case"HTML":return`
<!-- Example HTML Code -->
<!doctype html>
<html lang="en">
	<body>
	</body>
</html>
`;case"TypeScript":return`
/**
 * Example TypeScript Code
 */
export default () => ({});
`;default:return""}},Pe=({Content:e,Field:t},n)=>{n&&n.preventDefault()};oe(["click"]);export{Me as Return,Pe as Update,$e as default};
