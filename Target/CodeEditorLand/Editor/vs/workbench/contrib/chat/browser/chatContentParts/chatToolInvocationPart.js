var N=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var h=(a,e,n,r)=>{for(var t=r>1?void 0:r?u(e,n):e,s=a.length-1,o;s>=0;s--)(o=a[s])&&(t=(r?o(e,n,t):o(t))||t);return r&&t&&N(e,n,t),t},l=(a,e)=>(n,r)=>e(n,r,a);import*as C from"../../../../../base/browser/dom.js";import{Codicon as R}from"../../../../../base/common/codicons.js";import{Emitter as p}from"../../../../../base/common/event.js";import{Disposable as g,DisposableStore as M}from"../../../../../base/common/lifecycle.js";import"../../../../../editor/browser/widget/markdownRenderer/browser/markdownRenderer.js";import{localize as f}from"../../../../../nls.js";import{IInstantiationService as I}from"../../../../../platform/instantiation/common/instantiation.js";import"../../common/chatService.js";import"../../common/chatViewModel.js";import"../chat.js";import{ChatConfirmationWidget as _}from"./chatConfirmationWidget.js";import"./chatContentParts.js";import{ChatProgressContentPart as b}from"./chatProgressContentPart.js";let m=class extends g{domNode;_onDidChangeHeight=this._register(new p);onDidChangeHeight=this._onDidChangeHeight.event;constructor(e,n,r,t){super(),this.domNode=C.$(".chat-tool-invocation-part");const s=this._register(new M),o=()=>{C.clearNode(this.domNode);const i=s.add(t.createInstance(d,e,n,r));this.domNode.appendChild(i.domNode),s.add(i.onNeedsRerender(()=>{o(),this._onDidChangeHeight.fire()}))};o()}hasSameContent(e,n,r){return e.kind==="toolInvocation"||e.kind==="toolInvocationSerialized"}addDisposable(e){this._register(e)}};m=h([l(3,I)],m);let d=class extends g{domNode;_onNeedsRerender=this._register(new p);onNeedsRerender=this._onNeedsRerender.event;constructor(e,n,r,t){if(super(),e.kind==="toolInvocation"&&e.confirmationMessages){const s=e.confirmationMessages.title,o=e.confirmationMessages.message,i=this._register(t.createInstance(_,s,o,[{label:f("continue","Continue"),data:!0},{label:f("cancel","Cancel"),data:!1,isSecondary:!0}]));this.domNode=i.domNode,this._register(i.onDidClick(c=>{e.confirmed.complete(c.data)})),e.confirmed.p.then(()=>this._onNeedsRerender.fire())}else{const o={kind:"progressMessage",content:{value:e.invocationMessage+"\u2026"}},i=e.isConfirmed===!1?R.error:void 0,c=this._register(t.createInstance(b,o,r,n,void 0,!0,i));this.domNode=c.domNode}}};d=h([l(3,I)],d);export{m as ChatToolInvocationPart};
